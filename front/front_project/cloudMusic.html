<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>经验总结 | sunBlog</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/sun.png">
    <meta name="description" content="fatsunshineboy的个人博客">
    
    <link rel="preload" href="/assets/css/0.styles.8fc29a17.css" as="style"><link rel="preload" href="/assets/js/app.49f5c377.js" as="script"><link rel="preload" href="/assets/js/2.d2c14998.js" as="script"><link rel="preload" href="/assets/js/30.25cee870.js" as="script"><link rel="prefetch" href="/assets/js/10.33fbe10a.js"><link rel="prefetch" href="/assets/js/11.f902ccd3.js"><link rel="prefetch" href="/assets/js/12.602ef32c.js"><link rel="prefetch" href="/assets/js/13.267915e5.js"><link rel="prefetch" href="/assets/js/14.51240391.js"><link rel="prefetch" href="/assets/js/15.911e63e1.js"><link rel="prefetch" href="/assets/js/16.c891e198.js"><link rel="prefetch" href="/assets/js/17.6b166d2e.js"><link rel="prefetch" href="/assets/js/18.5df18872.js"><link rel="prefetch" href="/assets/js/19.9c58ef6b.js"><link rel="prefetch" href="/assets/js/20.b69808b7.js"><link rel="prefetch" href="/assets/js/21.86a7d34e.js"><link rel="prefetch" href="/assets/js/22.b7298ab9.js"><link rel="prefetch" href="/assets/js/23.a5f921f1.js"><link rel="prefetch" href="/assets/js/24.c21ddb64.js"><link rel="prefetch" href="/assets/js/25.5aee627f.js"><link rel="prefetch" href="/assets/js/26.c1918217.js"><link rel="prefetch" href="/assets/js/27.89c49370.js"><link rel="prefetch" href="/assets/js/28.36d9903c.js"><link rel="prefetch" href="/assets/js/29.0907fefb.js"><link rel="prefetch" href="/assets/js/3.005bd3af.js"><link rel="prefetch" href="/assets/js/31.8257ad3c.js"><link rel="prefetch" href="/assets/js/32.91d1291d.js"><link rel="prefetch" href="/assets/js/33.0c27517e.js"><link rel="prefetch" href="/assets/js/34.f67c2078.js"><link rel="prefetch" href="/assets/js/35.02fe8093.js"><link rel="prefetch" href="/assets/js/36.e0b1d16c.js"><link rel="prefetch" href="/assets/js/4.a68ff159.js"><link rel="prefetch" href="/assets/js/5.42e8b644.js"><link rel="prefetch" href="/assets/js/6.d6278f0b.js"><link rel="prefetch" href="/assets/js/7.cc921ffd.js"><link rel="prefetch" href="/assets/js/8.683bc7a3.js"><link rel="prefetch" href="/assets/js/9.f5342317.js">
    <link rel="stylesheet" href="/assets/css/0.styles.8fc29a17.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/sun.png" alt="sunBlog" class="logo"> <span class="site-name can-hide">sunBlog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/" class="nav-link">
  博客
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端" class="mobile-dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/front/front_learn/JavaScript_Learn.html" class="nav-link">
  笔记
</a></li><li class="dropdown-item"><!----> <a href="/front/front_project/Snake.html" class="nav-link">
  项目
</a></li></ul></div></div><div class="nav-item"><a href="/back/java.html" class="nav-link">
  后端
</a></div><div class="nav-item"><a href="/algorithm/leetcode.html" class="nav-link">
  算法
</a></div><div class="nav-item"><a href="/record/" class="nav-link">
  杂记
</a></div> <a href="https://github.com/fatsunshineboy/fatsunshineboy.github.io" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/" class="nav-link">
  博客
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端" class="mobile-dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/front/front_learn/JavaScript_Learn.html" class="nav-link">
  笔记
</a></li><li class="dropdown-item"><!----> <a href="/front/front_project/Snake.html" class="nav-link">
  项目
</a></li></ul></div></div><div class="nav-item"><a href="/back/java.html" class="nav-link">
  后端
</a></div><div class="nav-item"><a href="/algorithm/leetcode.html" class="nav-link">
  算法
</a></div><div class="nav-item"><a href="/record/" class="nav-link">
  杂记
</a></div> <a href="https://github.com/fatsunshineboy/fatsunshineboy.github.io" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>前端学习</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>前端项目</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/front/front_project/Snake.html" class="sidebar-link">贪吃蛇</a></li><li><a href="/front/front_project/upLoadImg.html" class="sidebar-link">图片上传</a></li><li><a href="/front/front_project/cloudMusic.html" aria-current="page" class="active sidebar-link">网易云音乐</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="经验总结"><a href="#经验总结" class="header-anchor">#</a> 经验总结</h2> <h3 id="输入框"><a href="#输入框" class="header-anchor">#</a> 输入框</h3> <div class="language-css extra-class"><pre class="language-css"><code>&lt;!-- 改变输入框的光标位置 --&gt;
<span class="token property">padding-left</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>

&lt;!-- 改变输入框的背景透明度而不影响字体的透明度 --&gt;
<span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0.1<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token selector">&lt;!-- 改变 placeHolder 的样式 --&gt;
::-webkit-input-placeholder</span> <span class="token punctuation">{</span>
    <span class="token comment">/* WebKit, Blink, Edge */</span>
    <span class="token property">color</span><span class="token punctuation">:</span> #909<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">::-moz-placeholder</span> <span class="token punctuation">{</span>
    <span class="token comment">/* Mozilla Firefox 4 to 18 */</span>
    <span class="token property">color</span><span class="token punctuation">:</span> #909<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">::-moz-placeholder</span> <span class="token punctuation">{</span>
    <span class="token comment">/* Mozilla Firefox 19+ */</span>
    <span class="token property">color</span><span class="token punctuation">:</span> #909<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">::-ms-input-placeholder</span> <span class="token punctuation">{</span>
    <span class="token comment">/* Internet Explorer 10-11 */</span>
    <span class="token property">color</span><span class="token punctuation">:</span> #909<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">&lt;!-- 取消输入框的边框 --&gt;
input</span><span class="token punctuation">{</span>
     outline：none<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="修改-svg-图标的颜色"><a href="#修改-svg-图标的颜色" class="header-anchor">#</a> 修改 svg 图标的颜色</h3> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">&lt;!-- 页面内引入svg,修改fill属性 --&gt;

&lt;!-- img标签引入svg,此时css对svg文件无法生效，此时要用到CSS3滤镜filter中的drop-shadow，通过生产一个可指定颜色的阴影放置于svg的位置，并将原始svg移出视线 --&gt;

 svg</span><span class="token punctuation">{</span>
     <span class="token property">filter</span><span class="token punctuation">:</span> <span class="token function">drop-shadow</span><span class="token punctuation">(</span>#ff0 100px 0<span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translateX</span><span class="token punctuation">(</span>-100px<span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
</code></pre></div><h3 id="vue3-scss-动态换肤"><a href="#vue3-scss-动态换肤" class="header-anchor">#</a> vue3 + scss 动态换肤</h3> <p>(1) 在一个 scss 文件中定义全局变量，变量引用 css 变量</p> <div class="language-scss extra-class"><pre class="language-scss"><code> <span class="token comment">// setting.scss</span>
 <span class="token comment">// 主要颜色</span>
 <span class="token property"><span class="token variable">$primaryColor</span></span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--primaryColor<span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token comment">// 字体颜色</span>
 <span class="token property"><span class="token variable">$fontColor</span></span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--fontColor<span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token comment">// svg 图标字体颜色</span>
 <span class="token property"><span class="token variable">$svgColor</span></span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--svgColor<span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token comment">// 图标颜色</span>
 <span class="token property"><span class="token variable">$iconColor</span></span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--iconColor<span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token comment">// 图标背景颜色</span>
 <span class="token property"><span class="token variable">$iconBackColor</span></span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--iconBackColor<span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token comment">// placeHolder颜色</span>
 <span class="token property"><span class="token variable">$placeHolderColor</span></span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--placeHolderColor<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>(2) 在项目的根组件处导入 scss文件</p> <div class="language-scss extra-class"><pre class="language-scss"><code> <span class="token keyword">@import</span> <span class="token string">&quot;@/style/setting.scss&quot;</span><span class="token punctuation">;</span>
</code></pre></div><p>(3) 用一个 div 将根组件都包起来，在 vue 的对象中定义 css 变量,将对象绑定到 div 的 style 中，此时 scss 变量的作用域为整个项目，将修改变量的方法注入，子组件调用方法修改变量，便可以实现换肤</p> <div class="language- extra-class"><pre><code>例子:
</code></pre></div><div class="language-vue extra-class"><pre class="language-vue"><code> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>root<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>styleSetting</span> <span class="token attr-name">as</span> <span class="token attr-name">any</span><span class="token punctuation">&gt;</span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>HeaderViewVue</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>HeaderViewVue</span><span class="token punctuation">&gt;</span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ContentViewVue</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ContentViewVue</span><span class="token punctuation">&gt;</span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>FooterViewVue</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>FooterViewVue</span><span class="token punctuation">&gt;</span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
 <span class="token keyword">import</span> HeaderViewVue <span class="token keyword">from</span> <span class="token string">&quot;@/views/Header/HeaderView.vue&quot;</span><span class="token punctuation">;</span>
 <span class="token keyword">import</span> ContentViewVue <span class="token keyword">from</span> <span class="token string">&quot;@/views/Content/ContentView.vue&quot;</span><span class="token punctuation">;</span>
 <span class="token keyword">import</span> FooterViewVue <span class="token keyword">from</span> <span class="token string">&quot;@/views/Footer/FooterView.vue&quot;</span><span class="token punctuation">;</span>

 <span class="token keyword">import</span> <span class="token punctuation">{</span> reactive<span class="token punctuation">,</span> provide<span class="token punctuation">,</span> type StyleValue <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>

 <span class="token keyword">import</span> type <span class="token punctuation">{</span> styleSetting <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@/type/styleSetting&quot;</span><span class="token punctuation">;</span>

 <span class="token comment">// 修改样式的方法,并将方法提供给子组件</span>

 <span class="token keyword">let</span> <span class="token literal-property property">styleSetting</span><span class="token operator">:</span> styleSetting <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
     <span class="token comment">// 主要颜色</span>
     <span class="token string-property property">&quot;--primaryColor&quot;</span><span class="token operator">:</span> <span class="token string">&quot;#ec4141&quot;</span><span class="token punctuation">,</span>
     <span class="token comment">// 字体颜色</span>
     <span class="token string-property property">&quot;--fontColor&quot;</span><span class="token operator">:</span> <span class="token string">&quot;#fff&quot;</span><span class="token punctuation">,</span>
     <span class="token comment">// svg 图标字体颜色</span>
     <span class="token string-property property">&quot;--svgColor&quot;</span><span class="token operator">:</span> <span class="token string">&quot;#ec4141&quot;</span><span class="token punctuation">,</span>
     <span class="token comment">// 图标颜色</span>
     <span class="token string-property property">&quot;--iconColor&quot;</span><span class="token operator">:</span> <span class="token string">&quot;#fff&quot;</span><span class="token punctuation">,</span>
     <span class="token comment">// 图标背景颜色</span>
     <span class="token string-property property">&quot;--iconBackColor&quot;</span><span class="token operator">:</span> <span class="token string">&quot;black&quot;</span><span class="token punctuation">,</span>
     <span class="token comment">// placeHolder颜色</span>
     <span class="token string-property property">&quot;--placeHolderColor&quot;</span><span class="token operator">:</span> <span class="token string">&quot;#ccc&quot;</span>
 <span class="token punctuation">}</span><span class="token punctuation">)</span>

 <span class="token keyword">const</span> <span class="token literal-property property">changeStyleSetting</span><span class="token operator">:</span> Function <span class="token operator">=</span> <span class="token punctuation">(</span>styleSettingObject<span class="token operator">:</span> styleSetting<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token parameter"><span class="token keyword">void</span></span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
     <span class="token comment">// 保持响应性</span>
     Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>styleSetting<span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token operator">...</span>styleSettingObject <span class="token punctuation">}</span><span class="token punctuation">)</span>
 <span class="token punctuation">}</span>

 <span class="token function">provide</span><span class="token punctuation">(</span><span class="token string">&quot;changeStyleSettingFun&quot;</span><span class="token punctuation">,</span> changeStyleSetting<span class="token punctuation">)</span><span class="token punctuation">;</span>
 </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">scoped</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>scss<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
 <span class="token atrule"><span class="token rule">@import</span> <span class="token string">&quot;@/style/setting.scss&quot;</span><span class="token punctuation">;</span></span>
 </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="进度条的实现"><a href="#进度条的实现" class="header-anchor">#</a> 进度条的实现</h3> <div class="language-html extra-class"><pre class="language-html"><code> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>progress<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>progressItem<span class="token punctuation">&quot;</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">--progress</span><span class="token punctuation">:</span>90%</span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-scss extra-class"><pre class="language-scss"><code> <span class="token selector">.progress </span><span class="token punctuation">{</span>
     <span class="token property">width</span><span class="token punctuation">:</span> 352px<span class="token punctuation">;</span>
     <span class="token property">height</span><span class="token punctuation">:</span> 2.5px<span class="token punctuation">;</span>
     <span class="token property">border-radius</span><span class="token punctuation">:</span> 25px<span class="token punctuation">;</span>
     <span class="token property">background-color</span><span class="token punctuation">:</span> #eee<span class="token punctuation">;</span>
     <span class="token property">margin</span><span class="token punctuation">:</span> 0 4px 0 4px<span class="token punctuation">;</span>
     <span class="token selector">.progressItem </span><span class="token punctuation">{</span>
     <span class="token property">width</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--progress<span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token property">height</span><span class="token punctuation">:</span> inherit<span class="token punctuation">;</span>
     <span class="token property">border-radius</span><span class="token punctuation">:</span> 25px 0 0 25px<span class="token punctuation">;</span>
     <span class="token property">background-color</span><span class="token punctuation">:</span> #ff4e4e<span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
 <span class="token punctuation">}</span>
</code></pre></div><h3 id="鼠标经过显示提示"><a href="#鼠标经过显示提示" class="header-anchor">#</a> 鼠标经过显示提示</h3> <p>设置 title 属性即可</p> <h3 id="audio-属性"><a href="#audio-属性" class="header-anchor">#</a> audio 属性</h3> <div class="language- extra-class"><pre><code>ontimeupdate 监听音频播放
</code></pre></div><ol><li>currentTime属性、startTime属性与duration属性</li></ol> <div class="language- extra-class"><pre><code>可以使用video元素或audio元素的currentTime属性来读取媒体的当前播放位置，也可以通过修改currentTime性情
为修改当前的播放位置。如果修改的位置上没有可用的媒体数据时，将抛出INVALID_STATE_ERR异常；如果修改的
位置超出了浏览器在一次请求中可以请求的数据范围，将抛出INDEX_SIZE_ERR异常。

可以使用video元素或audio元素的startTime属性来读取媒体播放的开始时间，通常为0。

可以使用video元素或audio元素的dutation属性来读取媒体文件总的播放时间。

三者的时间、单位均为秒，currentTime为可读与属性，其余两个均为只读属性。
</code></pre></div><ol start="2"><li>volume属性和muted属性</li></ol> <div class="language- extra-class"><pre><code>volume属性读取或修改媒体的的播放音量，范围从0到1，0为表单，1为最大音量。

muted属性读取或修改媒体的表单状态，该值为布尔值，true表示静音状态，false表示非静音状态。
</code></pre></div><ol start="3"><li>defaultPlayRate属性与playbackRate属性</li></ol> <div class="language- extra-class"><pre><code>defaultPlayRate属性读取或修改媒体的播放速率。

playbackRate属性读取或修改媒体当前的播放速率。

```
    audio 的控制函数主要有：

    load() 加载音频、视频软件，通常不必调用，除非是动态生成的元素，用来在播放前预加载
    play() 加载并播放音频、视频文件，除非文件已经暂停在其他位置，否则默认重头开始播放
    pause() 暂停处于播放状态的音频、视频文件


    audio 的只读媒体特性有：

    duration 获取媒体文件的播放时长，以s为单位，如果无法获取，则为NaN
    paused 如果媒体文件被暂停，则返回true，否则返回false
    ended 如果媒体文件播放完毕，则返回true
    startTime 返回起始播放时间，一般是0.0，除非是缓冲过的媒体文件，并一部分内容已经不在缓冲区
    error 在发生了错误后返回的错误代码
    currentSrc 以字符串形式返回正在播放或已加载的文件，对应于浏览器在source元素中选择的文件

    audio 可脚本控制的特性值：

    autoplay 自动播放已经加载的的媒体文件，或查询是否已设置为autoplay
    loop 将媒体文件设置为循环播放，或查询是否已设置为loop
    currentTime 以s为单位返回从开始播放到目前所花的时间，也可设置 currentTime的值来跳转到特定位置
    controls 显示或者隐藏用户控制界面
    volume 在0.0到1.0间设置音量值,或查询当前音量值
    muted 设置是否静音
    autobuffer 媒体文件播放前是否进行缓冲加载，如果设置了autoplay，则忽略此特性

    歌曲播放进度

    这个功能用到的 audio api 主要有：

    currentTime() ：以秒为单位返回从开始播放到目前所花的时间，也可设置 currentTime 的值来跳转到特定位置；
    duration：获取媒体文件的播放时长，以秒为单位，如果无法获取，则为 NaN；

    歌曲进度：首先先设置一个定时器，分别获取这两个值，用当前播放的秒数除以歌曲总秒数，再乘以歌曲进度条的总宽度（px），就能算出歌曲进度条一      秒钟可以走多少。

    歌曲进度调节：点击进度条的某个位置，歌曲跳转到响应位置，这个功能的实现是先获取到点击的位置距离进度条最左边的长度（让 Firefox 支持 offsetX、offsetY），接着获得这段距离在整个进度条的长度里所占的百分比，用这个百分比乘以歌曲的总长度，就能算出该给 currentTime 设置的值。

    歌曲时间显示

    歌曲显示：在计算歌曲进度的定时器内，不断发送歌曲的播放时间和总时间，左边的时间为歌曲的播放时间，也就是 currentTime 的值，右边的时间用总时间减去 currentTime ，并将它们转换为我们需要的格式即可。

    音量的调节

    volume：在0.0到1.0间设置音量值,或查询当前音量值；

    音量调节：这个功能实现起来很简单，把 volume 的值设为 0.0，就静音了。在控件上调节音量的原理和也歌曲的进度条一样，判断点击位置距离第一个相对元素 Y 轴上最顶端的位置，然后再进一步计算出具体的数值，注意数值的格式，别超过1，并且小数点后只有1位。

    播放列表与播放方式

    把整个歌曲文件的信息都写在 json 文件里，获取并生成播放列表。当播放歌曲时，系统会生成当前播放歌曲的引索值（例如：1,2，表示第二张专辑的第三首歌，这个很重要，歌曲切换都是基于这个引索值的），当要播放下一曲时，系统会根据当前是什么播放方式（列表循环，单曲循环，随机播放，顺  序播放），生成新的引索值，然后通知播放器，下一首该怎么播放，是随机，还是循环，还是播放结束。

    同步显示歌词

    ajax获取歌词文件（lrc文件）

    用正则分别过滤出歌词和歌词前面对应的时间，存入数组

    将歌词的时间和内容遍历存入 HTML

    每秒都去判断一下现在歌曲播放的时间，如果和临时数据 data-timeline 里的值一样，就滚动
```
</code></pre></div><h3 id="js-动态改变-audio-的-src"><a href="#js-动态改变-audio-的-src" class="header-anchor">#</a> js 动态改变 audio 的 src</h3> <div class="language- extra-class"><pre><code>:::tip
    要改变 audio 的 src 值才有效果，改变 source 的 src 没有用，调用完后可以在调用 audio 的 load 函数
:::
</code></pre></div><h3 id="img实现图片加载前默认图片-加载时替换真实图片-加载失败时替换加载失败图片"><a href="#img实现图片加载前默认图片-加载时替换真实图片-加载失败时替换加载失败图片" class="header-anchor">#</a> img实现图片加载前默认图片，加载时替换真实图片，加载失败时替换加载失败图片</h3> <div class="language-css extra-class"><pre class="language-css"><code><span class="token comment">/* css 实现替代图片 */</span>
<span class="token selector">img</span> <span class="token punctuation">{</span>
    <span class="token property">margin</span><span class="token punctuation">:</span> 25px 10px 25px 0<span class="token punctuation">;</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 260px<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 164px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">img[src=&quot;&quot;],img:not([src])</span><span class="token punctuation">{</span>
	<span class="token property">width</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">padding</span><span class="token punctuation">:</span> 82px 130px<span class="token punctuation">;</span>
    <span class="token property">background</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span><span class="token string url">'/static/img/sitg.jpg'</span><span class="token punctuation">)</span></span> no-repeat center<span class="token punctuation">;</span>
    <span class="token property">background-size</span><span class="token punctuation">:</span>100% 100% <span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- 加载失败 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">:src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>personInfo.avatar<span class="token punctuation">&quot;</span></span> <span class="token special-attr"><span class="token attr-name">onerror</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value javascript language-javascript"><span class="token literal-property property">javascript</span><span class="token operator">:</span><span class="token keyword">this</span><span class="token punctuation">.</span>src<span class="token operator">=</span><span class="token string">'/static/img/fail.png'</span><span class="token punctuation">;</span><span class="token keyword">this</span><span class="token punctuation">.</span>οnerrοr<span class="token operator">=</span><span class="token keyword">null</span><span class="token punctuation">;</span></span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="用户点击按钮-弹出框出现-弹出框里有确认-取消按钮-点击确认-取消-其他区域-弹出框才消失"><a href="#用户点击按钮-弹出框出现-弹出框里有确认-取消按钮-点击确认-取消-其他区域-弹出框才消失" class="header-anchor">#</a> 用户点击按钮，弹出框出现，弹出框里有确认&amp;取消按钮，点击确认&amp;取消&amp;其他区域，弹出框才消失</h3> <p>难点：弹出框出现后怎么判断鼠标的下一次点击，最开始的时候，我在弹出框出现后，开始监听鼠标垫点击事件，判断 e.target.classname 是否有弹出框的类名，这种方式十分麻烦，在网上搜寻半天，找到一个较好的方法：</p> <p>DOM2事件流规定的事件流包括三个阶段：
1，事件捕获阶段。
2，处于目标阶段。
3，事件冒泡阶段。
事件流首先是经过事件捕获阶段，接着是处于目标阶段，最后是事件冒泡阶段</p> <p>首先在事件捕获过程中，document对象首先接收到click事件，然后事件沿着DOM树依次向下，一直传播到事件的实际目标。
接着在事件冒泡的过程中，事件开始是由具体的元素接收，然后逐级向上传播到较为不具体的节点。</p> <p>事件触发可以在捕获阶段，也可以在冒泡阶段，默认是冒泡阶段</p> <p>addEventListener 可以传第三个参数，决定事件的触发时间， 不传默认为 false （冒泡），true（捕获）</p> <p>新版第三个参数可以传对象，也可以直传 true 和 false</p> <div class="language-js extra-class"><pre class="language-js"><code>el<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>type<span class="token punctuation">,</span> listener<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">capture</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// === useCapture</span>
    <span class="token literal-property property">once</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>    <span class="token comment">// 是否设置单次监听</span>
    <span class="token literal-property property">passive</span><span class="token operator">:</span> <span class="token boolean">false</span>  <span class="token comment">// 是否让 阻止默认行为(preventDefault()) 失效</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// 新增参数的三个属性，默认值都是 false。</span>
</code></pre></div><p>实现目标的要点是，除了设置一个变量控制弹出框的显示与隐藏，再设置一个变量 flag ，默认为 true ,document.body 在捕获和冒泡阶段都触发鼠标点击事件。先执行捕获事件，将 falg 设为 true ，即默认鼠标点击了其它地方，此时事件捕获到目标弹出框，再将 flag 设置为 false ,最后在body的冒泡阶段判断 flag 的值，只要点击在弹出框上面就不会隐藏</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>root<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>show()<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>calender<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>showCalender<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>showDetail<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">

<span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> showCalender <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span>

<span class="token keyword">let</span> flag <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> <span class="token function-variable function">show</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    showCalender<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    flag<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">789</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token function-variable function">showDetail</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">e</span><span class="token operator">:</span> any</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    flag<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token boolean">false</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    flag<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token boolean">true</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">456</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>

document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;aaa&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>flag<span class="token punctuation">.</span>value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        showCalender<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>


</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>scss<span class="token punctuation">&quot;</span></span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">.root</span> <span class="token punctuation">{</span>
    <span class="token selector">.calender</span> <span class="token punctuation">{</span>
        <span class="token property">width</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span>
        <span class="token property">height</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span>
        <span class="token property">background-color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="在-vue-中使用-scss-的变量"><a href="#在-vue-中使用-scss-的变量" class="header-anchor">#</a> 在 vue 中使用 scss 的变量</h3> <ul><li><ol><li>新建一个以 <code>.module.scss</code>结尾的 scss 的文件 ，如 “ setting.module.scss ”</li></ol></li> <li><ol start="2"><li>创建一个变量并且导出</li></ol></li></ul> <div class="language-scss extra-class"><pre class="language-scss"><code><span class="token property"><span class="token variable">$headerHeight</span></span><span class="token punctuation">:</span>70px<span class="token punctuation">;</span>

<span class="token comment">// 导出,在vue中引用</span>
<span class="token selector">:export </span><span class="token punctuation">{</span>
  <span class="token property">headerHeight</span><span class="token punctuation">:</span> <span class="token variable">$headerHeight</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li><ol start="3"><li>在 vue 文件中引入 scss 文件</li></ol></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> config <span class="token keyword">from</span> <span class="token string">&quot;setting.module.scss&quot;</span><span class="token punctuation">;</span>
</code></pre></div><ul><li><ol start="4"><li>使用变量</li></ol></li></ul> <div class="language-js extra-class"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>config<span class="token punctuation">.</span>headerHeight<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="对象数组的深浅拷贝"><a href="#对象数组的深浅拷贝" class="header-anchor">#</a> 对象数组的深浅拷贝</h3> <p>歌单的值由状态管理 pinia 负责，播放全部写成一个组件，通过props传值给组件，点击播放时，组件将歌单传给 pinia ,但由于对象和数组直接赋值时都是传的地址，这导致在 pinia 中修改歌单，影响到了页面的数据</p> <p>浅拷贝
什么是浅拷贝：两者是指向一个对象。</p> <p>对象的浅拷贝
1、对象的直接遍历赋值。</p> <p>2、ES6中的 var copyObj = Object.assign({}, obj);</p> <p>3、ES7扩展运算符 var copyObj = { ...obj }</p> <p>4、Jquery浅拷贝 var copiedObject = jQuery.extend({}, originalObject) 如果改变了originalObject，copiedObject 也会变。</p> <p>数组的浅拷贝
（两者指向不同的对象，但是只能拷贝一层）</p> <p><code>array.concat()</code> <code>array.slice(0)</code></p> <p>如果该元素是个对象引用 （不是实际的对象），slice 会拷贝这个对象引用到新的数组里。两个对象引用都引用了同一个对象。如果被引用的对象发 生改变，则新的和原来的数组中的这个元素也会发生改变，所以是浅拷贝。</p> <p>对于字符串、数字及布尔值来说（不是 String、Number 或者 Boolean 对象），slice 会拷贝这些值到新的数组里。在别的数组里修改这些字符串或数字或是布尔值，将不会影响另一个数组。</p> <p>也就是说，如果原数组改变的是基本数据类型，比如String，Boolean，Number的数据，不会影响到新数组；
但是如果改变的是对象或者数组中的数据，是会影响到新数组的，也也就是对于对象或者数组，新旧数组指向的是一个对象。</p> <p>深拷贝
（下面说的深拷贝是基本对象的深拷贝，不考虑对象的复杂属性，比如set，get，Function等）</p> <p>1、最简单的方式 JSON.parse(JSON.stringify(Obj)) 这种方法使用较为简单，可以满足基本的深拷贝需求，而且能够处理JSON格式能表示的所有数据类型，但是对于正则表达式类型、函数类型等无法进行深拷贝(而且会直接丢失相应的值)。</p> <p>2、jQuery深拷贝 var copiedObject = $.extend(true, {}, originalObject)</p> <p>3、手动写递归方式</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> array <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span> <span class="token literal-property property">number</span><span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token literal-property property">number</span><span class="token operator">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token literal-property property">number</span><span class="token operator">:</span> <span class="token number">3</span> <span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">copy</span> <span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> newobj <span class="token operator">=</span> obj<span class="token punctuation">.</span>constructor <span class="token operator">===</span> Array <span class="token operator">?</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> obj <span class="token operator">!==</span> <span class="token string">'object'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token keyword">in</span> obj<span class="token punctuation">)</span><span class="token punctuation">{</span>
       newobj<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">typeof</span> obj<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">'object'</span> <span class="token operator">?</span> <span class="token function">copy</span><span class="token punctuation">(</span>obj<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">:</span> obj<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> newobj
<span class="token punctuation">}</span>
<span class="token keyword">var</span> copyArray <span class="token operator">=</span> <span class="token function">copy</span><span class="token punctuation">(</span>array<span class="token punctuation">)</span>
copyArray<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>number <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>array<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//  [{number: 1}, { number: 2 }, { number: 3 }]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>copyArray<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [{number: 100}, { number: 2 }, { number: 3 }]</span>
</code></pre></div><h3 id="对象数组的去重-歌单为例"><a href="#对象数组的去重-歌单为例" class="header-anchor">#</a> 对象数组的去重（歌单为例）</h3> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 增加歌曲到播放列表</span>
  <span class="token keyword">const</span> <span class="token function-variable function">appendSongToPlayLsit</span> <span class="token operator">=</span> <span class="token punctuation">(</span>
    insertPlayList<span class="token operator">:</span> <span class="token builtin">Array</span><span class="token operator">&lt;</span>playList<span class="token operator">&gt;</span><span class="token punctuation">,</span>
    playAtOnce <span class="token operator">=</span> <span class="token boolean">true</span>
  <span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 剔除已经在歌单里的歌</span>
    <span class="token keyword">let</span> tempPlayList <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>playList<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> tempInsertPlayList <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>insertPlayList<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 新添加的歌单都是在 nowToPlayId 的后面，不可能在之前</span>
    tempPlayList<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>nowToPlayId<span class="token punctuation">.</span>value <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">...</span>tempInsertPlayList<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">let</span> hash <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> deletedIndex<span class="token operator">:</span> <span class="token builtin">Array</span><span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> nowToPlayIdCount <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> temp <span class="token operator">=</span> tempPlayList<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span>
      <span class="token punctuation">(</span>acc<span class="token operator">:</span> <span class="token builtin">Array</span><span class="token operator">&lt;</span>playList<span class="token operator">&gt;</span><span class="token punctuation">,</span> cru<span class="token operator">:</span> playList<span class="token punctuation">,</span> index<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>hash<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>cru<span class="token punctuation">[</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>hash<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>cru<span class="token punctuation">[</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">&quot;index&quot;</span><span class="token punctuation">]</span> <span class="token operator">&lt;=</span> nowToPlayId<span class="token punctuation">.</span>value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 有重复的值，并且第一个值在当前播放的前面</span>
            <span class="token comment">// 删除第一个值，把第二个值存到 hash</span>
            <span class="token comment">// 把 nowToPlayId 的值向往前移一位</span>
            <span class="token comment">// acc.splice(hash.get(cru[&quot;id&quot;])[&quot;index&quot;], 1);</span>
            <span class="token comment">// 这个删除导致在 nowToPlayId 的id对应的索引错位</span>
            <span class="token comment">// 解决方法再加一个 deletedIndex 记录要删除的下标</span>
            deletedIndex<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>hash<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>cru<span class="token punctuation">[</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">&quot;index&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            hash<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>cru<span class="token punctuation">[</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> index<span class="token operator">:</span> acc<span class="token punctuation">.</span>length <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            acc<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>cru<span class="token punctuation">)</span><span class="token punctuation">;</span>
            nowToPlayIdCount <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
          <span class="token comment">// else if (hash.get(cru[&quot;id&quot;])[&quot;index&quot;] &gt;= nowToPlayId.value) {</span>
          <span class="token comment">// 有重复的值，并且第一个值在当前播放的后面，删除第二个值,也就是什么都不处理</span>
          <span class="token comment">// 有重复的值，并且就是当前播放的歌曲，还是什么都不处理</span>
          <span class="token comment">// }</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          <span class="token comment">// 如果之前没有这个值，就把这个值存到 hash</span>
          hash<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>cru<span class="token punctuation">[</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> index<span class="token operator">:</span> acc<span class="token punctuation">.</span>length <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          acc<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>cru<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// console.log(acc);</span>
        <span class="token keyword">return</span> acc<span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 循环将数组应删除的元素删除，删完将变成 undefined</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> deletedIndex<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">delete</span> temp<span class="token punctuation">[</span>deletedIndex<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 将 undefined 删除</span>
    temp <span class="token operator">=</span> temp<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span>item<span class="token operator">:</span> playList<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> item <span class="token operator">!=</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    playList<span class="token punctuation">.</span>value <span class="token operator">=</span> temp<span class="token punctuation">;</span>
    localStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token string">&quot;playList&quot;</span><span class="token punctuation">,</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>playList<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">setNowToPlayId</span><span class="token punctuation">(</span>nowToPlayId<span class="token punctuation">.</span>value <span class="token operator">-</span> nowToPlayIdCount<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>playAtOnce<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">setNowToPlayId</span><span class="token punctuation">(</span>nowToPlayId<span class="token punctuation">.</span>value <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/fatsunshineboy/fatsunshineboy.github.io/edit/main/docs/front/front_project/cloudMusic.md" target="_blank" rel="noopener noreferrer">编辑此页</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">1/29/2023, 12:02:50 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/front/front_project/upLoadImg.html" class="prev">
        图片上传
      </a></span> <!----></p></div> </main></div><div class="global-ui"><section class="side-anchor"><ul style="display:none;"></ul></section></div></div>
    <script src="/assets/js/app.49f5c377.js" defer></script><script src="/assets/js/2.d2c14998.js" defer></script><script src="/assets/js/30.25cee870.js" defer></script>
  </body>
</html>
