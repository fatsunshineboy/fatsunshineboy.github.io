<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>git push -u | sunBlog</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/sun.png">
    <meta name="description" content="fatsunshineboy的个人博客">
    
    <link rel="preload" href="/assets/css/0.styles.8fc29a17.css" as="style"><link rel="preload" href="/assets/js/app.e940b9eb.js" as="script"><link rel="preload" href="/assets/js/2.d2c14998.js" as="script"><link rel="preload" href="/assets/js/32.91d1291d.js" as="script"><link rel="prefetch" href="/assets/js/10.33fbe10a.js"><link rel="prefetch" href="/assets/js/11.4e8abeff.js"><link rel="prefetch" href="/assets/js/12.1be5efaa.js"><link rel="prefetch" href="/assets/js/13.267915e5.js"><link rel="prefetch" href="/assets/js/14.51240391.js"><link rel="prefetch" href="/assets/js/15.911e63e1.js"><link rel="prefetch" href="/assets/js/16.c891e198.js"><link rel="prefetch" href="/assets/js/17.6b166d2e.js"><link rel="prefetch" href="/assets/js/18.5df18872.js"><link rel="prefetch" href="/assets/js/19.9c58ef6b.js"><link rel="prefetch" href="/assets/js/20.b69808b7.js"><link rel="prefetch" href="/assets/js/21.86a7d34e.js"><link rel="prefetch" href="/assets/js/22.b7298ab9.js"><link rel="prefetch" href="/assets/js/23.a5f921f1.js"><link rel="prefetch" href="/assets/js/24.70d24f2e.js"><link rel="prefetch" href="/assets/js/25.64a6549e.js"><link rel="prefetch" href="/assets/js/26.c1918217.js"><link rel="prefetch" href="/assets/js/27.89c49370.js"><link rel="prefetch" href="/assets/js/28.36d9903c.js"><link rel="prefetch" href="/assets/js/29.0907fefb.js"><link rel="prefetch" href="/assets/js/3.005bd3af.js"><link rel="prefetch" href="/assets/js/30.36c9cc05.js"><link rel="prefetch" href="/assets/js/31.8257ad3c.js"><link rel="prefetch" href="/assets/js/33.0c27517e.js"><link rel="prefetch" href="/assets/js/34.f67c2078.js"><link rel="prefetch" href="/assets/js/35.02fe8093.js"><link rel="prefetch" href="/assets/js/36.e0b1d16c.js"><link rel="prefetch" href="/assets/js/4.a68ff159.js"><link rel="prefetch" href="/assets/js/5.42e8b644.js"><link rel="prefetch" href="/assets/js/6.e416b78d.js"><link rel="prefetch" href="/assets/js/7.cc921ffd.js"><link rel="prefetch" href="/assets/js/8.683bc7a3.js"><link rel="prefetch" href="/assets/js/9.f5342317.js">
    <link rel="stylesheet" href="/assets/css/0.styles.8fc29a17.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/sun.png" alt="sunBlog" class="logo"> <span class="site-name can-hide">sunBlog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/" class="nav-link">
  博客
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端" class="mobile-dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/front/front_learn/JavaScript_Learn.html" class="nav-link">
  笔记
</a></li><li class="dropdown-item"><!----> <a href="/front/front_project/Snake.html" class="nav-link">
  项目
</a></li></ul></div></div><div class="nav-item"><a href="/back/java.html" class="nav-link">
  后端
</a></div><div class="nav-item"><a href="/algorithm/leetcode.html" class="nav-link">
  算法
</a></div><div class="nav-item"><a href="/record/" class="nav-link router-link-active">
  杂记
</a></div> <a href="https://github.com/fatsunshineboy/fatsunshineboy.github.io" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/" class="nav-link">
  博客
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端" class="mobile-dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/front/front_learn/JavaScript_Learn.html" class="nav-link">
  笔记
</a></li><li class="dropdown-item"><!----> <a href="/front/front_project/Snake.html" class="nav-link">
  项目
</a></li></ul></div></div><div class="nav-item"><a href="/back/java.html" class="nav-link">
  后端
</a></div><div class="nav-item"><a href="/algorithm/leetcode.html" class="nav-link">
  算法
</a></div><div class="nav-item"><a href="/record/" class="nav-link router-link-active">
  杂记
</a></div> <a href="https://github.com/fatsunshineboy/fatsunshineboy.github.io" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/record/" aria-current="page" class="sidebar-link">杂记</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>git</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/record/Git_Learn_Experience.html" class="sidebar-link">git学习经验</a></li><li><a href="/record/Git_Difficult.html" aria-current="page" class="active sidebar-link">git疑难杂点</a></li><li><a href="/record/Git_Problem.html" class="sidebar-link">git错误问题</a></li></ul></section></li><li><a href="/record/Linux_Learn.html" class="sidebar-link">Linux命令学习</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="git-push-u"><a href="#git-push-u" class="header-anchor">#</a> git push -u</h2> <p>参数解析：</p> <p>首先对于 git push,有这样一段描述：</p> <div class="language- extra-class"><pre class="language-text"><code>-u

–set-upstream

For every branch that is up to date or successfully pushed, add upstream (tracking) reference,
used by argument-less git-pull(1) and other commands. For more information, see branch.&lt;name&gt;.
merge in git-config(1)
</code></pre></div><p>在这个描述中，可以看到 -u 参数与下面这个变量相关</p> <p><code>branch.&lt;name&gt;.merge</code></p> <p><code>branch.&lt;name&gt;.merge</code>与<code>branch.&lt;name&gt;.remote</code>一起定义给定分支的上游分支（upstream）。它告诉git fetch/git pull要合并哪个分支，还可以影响git push.</p> <p>而upstream是指其他人将从中获取的主要存储库，例如您的GitHub存储库。-u选项自动为您设置上游，将您的仓库链接到一个中央仓库。这样，将来Git会“知道”您要推送到的位置以及您要从哪里提取的信息，因此您可以使用git pull或git push不使用参数。</p> <p>当您git pull从分支进行操作而未指定源远程或分支时，git会查看 <code>branch.&lt;name&gt;.merge</code> 设置以了解从何处提取。而正是git push -u 命令为您要推送的分支设置此信息。</p> <p>至此，简单来说，带上-u 参数其实就相当于记录了push到远端分支的默认值，这样当下次我们还想要继续push的这个远端分支的时候推送命令就可以简写成git push即可。</p> <p>其实，执行添加了-u 参数的命令 <code>git push -u origin master</code>就相当于是执行了<code>git push origin master</code> 和<code>git branch --set-upstream master origin/master</code>。</p> <p>所以，在进行推送代码到远端分支，且之后希望持续向该远程分支推送，则可以在推送命令中添加 -u 参数，简化之后的推送命令输入。</p> <p><a href="https://www.php.cn/tool/git/493447.html" target="_blank" rel="noopener noreferrer">文章来源<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="git-clone-分支问题"><a href="#git-clone-分支问题" class="header-anchor">#</a> git clone 分支问题</h2> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>调用<code>git branch</code>发现只有默认分支,网上有博客说<code>git clone url</code>就是<code>git clone -b master url</code>的缩写,也就是说本地只会有默认分支，还得自己手动创建关联其他分支。笔者认为git clone的时候已经把所有分支拉取下来了，只是本地没有创建分支,通过<code>git checkout &lt;branch_name&gt;</code>可以在本地新建分支，并且自动拉取跟踪远程分支，但这个拉取并不是实时从远程仓库中来的，而是在git clone的时候就已经拉去过来的，可以用test仓库做个实验</p></div> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment">#先clone一个仓库</span>
$ <span class="token function">git</span> clone git@github.com:fatsunshineboy/test.git
Cloning into <span class="token string">'test'</span><span class="token punctuation">..</span>.
remote: Enumerating objects: <span class="token number">122</span>, done.
remote: Counting objects: <span class="token number">100</span>% <span class="token punctuation">(</span><span class="token number">122</span>/122<span class="token punctuation">)</span>, done.
remote: Compressing objects: <span class="token number">100</span>% <span class="token punctuation">(</span><span class="token number">77</span>/77<span class="token punctuation">)</span>, done.
remote: Total <span class="token number">122</span> <span class="token punctuation">(</span>delta <span class="token number">27</span><span class="token punctuation">)</span>, reused <span class="token number">100</span> <span class="token punctuation">(</span>delta <span class="token number">19</span><span class="token punctuation">)</span>, pack-reused <span class="token number">0</span>
Receiving objects: <span class="token number">100</span>% <span class="token punctuation">(</span><span class="token number">122</span>/122<span class="token punctuation">)</span>, <span class="token number">22.48</span> KiB <span class="token operator">|</span> <span class="token number">7.49</span> MiB/s, done.
Resolving deltas: <span class="token number">100</span>% <span class="token punctuation">(</span><span class="token number">27</span>/27<span class="token punctuation">)</span>, done.
<span class="token comment">#调用 git branch -a 查看分支</span>
$ <span class="token function">git</span> branch -a
* main
  remotes/origin/HEAD -<span class="token operator">&gt;</span> origin/main
  remotes/origin/main
  remotes/origin/master
  remotes/origin/test
  remotes/origin/test123
  remotes/origin/test456
</code></pre></div><p>本地只有main分支，这个时候在github上手动给test分支添加一个test.md文件并提交
<img src="/imgs/record/git_idea/clone%E7%9A%84%E7%96%91%E9%9A%BE%E6%9D%82%E7%82%B9.png" alt="git疑难杂点"></p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment">#这个时候调用git checkout master</span>
$ <span class="token function">git</span> checkout master
Switched to a new branch <span class="token string">'master'</span>
branch <span class="token string">'master'</span> <span class="token builtin class-name">set</span> up to track <span class="token string">'origin/master'</span><span class="token builtin class-name">.</span>
<span class="token comment">#查看文件列表</span>
$ <span class="token function">ls</span>
<span class="token number">12</span>.txt  <span class="token number">123</span>.md  <span class="token number">123</span>.txt  test.txt
</code></pre></div><p>test.md并没有被拉取下来，说明没有从远程拉取。而且，在一般情况下，直接调用<code>git checkout branch</code>，如果branch不存在应该报错，git clone情况下，如果远程仓库有同名分支，就会新建并且跟踪远程分支。</p> <blockquote><p>猜测会不会是git checkout先从本地寻找分支，找不到去远程仓库寻找分支，结果验证失败，说明还是git clone的时候肯定把远程分支拉取下来了。
验证如下：</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment">#在本地初始化仓库</span>
$ <span class="token function">git</span> init
Initialized empty Git repository <span class="token keyword">in</span> C:/Users/15203/Desktop/新建文件夹 <span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>/.git/
<span class="token comment">#绑定远程仓库</span>
$ <span class="token function">git</span> remote <span class="token function">add</span> origin git@github.com:fatsunshineboy/test.git
<span class="token comment">#先拉取下master分支</span>
$ <span class="token function">git</span> pull origin master
<span class="token comment">#切换一个本地没有但远程仓库有的分支，如main</span>
$ <span class="token function">git</span> checkout main
error: pathspec <span class="token string">'main'</span> did not match any file<span class="token punctuation">(</span>s<span class="token punctuation">)</span> known to <span class="token function">git</span>
</code></pre></div><p>说明checkout不会从根据远程仓库的分支创建新分支，但是在<code>git clone</code>的仓库中例外</p></blockquote> <p>再换一个方法证明一下，如果<code>git clone url</code>就是<code>git clone -b master url</code>的缩写，我们在clone的时候就直接用<code>git clone -b master url</code>，看这个时候<code>git checkout &lt;branch_name&gt;</code>会不会起作用</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment">#调用git clone -b [分支] &lt;远程仓库URL&gt;</span>
$ <span class="token function">git</span> clone -b main git@github.com:fatsunshineboy/test.git
<span class="token comment">#打开github，在test分支上新加一个checkout.md</span>
<span class="token comment">#这个时候在调用git checkout &lt;branch&gt;</span>
$ <span class="token function">git</span> checkout master
Switched to branch <span class="token string">'master'</span>
Your branch is up to <span class="token function">date</span> with <span class="token string">'origin/master'</span><span class="token builtin class-name">.</span>
<span class="token comment">#本地仍然不会增加checkout.md</span>
</code></pre></div><p>总结一下<br>
git clone或者git clone -b在本地都只会展现一个分支，调用<code>git checkout &lt;branch_name&gt;</code>时（本地没有这个分支，并且本地的这个仓库是由git clone而来），如果远程有指定分支，就会在本地新建并且拉取跟踪这个分支，但是这个分支并不是远程最新（不是类似于git pull）的，而是调用<code>git clone</code>时仓库的状态</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/fatsunshineboy/fatsunshineboy.github.io/edit/main/docs/record/Git_Difficult.md" target="_blank" rel="noopener noreferrer">编辑此页</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">11/19/2022, 2:21:05 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/record/Git_Learn_Experience.html" class="prev">
        git学习经验
      </a></span> <span class="next"><a href="/record/Git_Problem.html">
        git错误问题
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><section class="side-anchor"><ul style="display:none;"></ul></section></div></div>
    <script src="/assets/js/app.e940b9eb.js" defer></script><script src="/assets/js/2.d2c14998.js" defer></script><script src="/assets/js/32.91d1291d.js" defer></script>
  </body>
</html>
