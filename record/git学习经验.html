<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>sunBlog</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/sun.png">
    <meta name="description" content="fatsunshineboy">
    
    <link rel="preload" href="/assets/css/0.styles.9825735b.css" as="style"><link rel="preload" href="/assets/js/app.30f6b455.js" as="script"><link rel="preload" href="/assets/js/2.2defd20b.js" as="script"><link rel="preload" href="/assets/js/16.7462880c.js" as="script"><link rel="prefetch" href="/assets/js/10.60c9f8fd.js"><link rel="prefetch" href="/assets/js/11.971219a8.js"><link rel="prefetch" href="/assets/js/12.ad8d5d93.js"><link rel="prefetch" href="/assets/js/13.790e7f6b.js"><link rel="prefetch" href="/assets/js/14.28381ca7.js"><link rel="prefetch" href="/assets/js/15.c84ec3ed.js"><link rel="prefetch" href="/assets/js/17.48aa7381.js"><link rel="prefetch" href="/assets/js/3.e04970d5.js"><link rel="prefetch" href="/assets/js/4.26f73e91.js"><link rel="prefetch" href="/assets/js/5.5dcec586.js"><link rel="prefetch" href="/assets/js/6.f2a96706.js"><link rel="prefetch" href="/assets/js/7.ba72b951.js"><link rel="prefetch" href="/assets/js/8.22bb98d0.js"><link rel="prefetch" href="/assets/js/9.dcbfdd31.js">
    <link rel="stylesheet" href="/assets/css/0.styles.9825735b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/sun.png" alt="sunBlog" class="logo"> <span class="site-name can-hide">sunBlog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/front/" class="nav-link">
  前端
</a></div><div class="nav-item"><a href="/back/" class="nav-link">
  后端
</a></div><div class="nav-item"><a href="/blog/" class="nav-link">
  Blog
</a></div><div class="nav-item"><a href="/record/" class="nav-link router-link-active">
  杂记
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/front/" class="nav-link">
  前端
</a></div><div class="nav-item"><a href="/back/" class="nav-link">
  后端
</a></div><div class="nav-item"><a href="/blog/" class="nav-link">
  Blog
</a></div><div class="nav-item"><a href="/record/" class="nav-link router-link-active">
  杂记
</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/record/" aria-current="page" class="sidebar-link">杂记</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>git</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/record/git提交问题.html" class="sidebar-link">git提交出现的问题</a></li><li><a href="/record/git学习经验.html" class="active sidebar-link">git学习经验</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/record/git学习经验.html#git基础" class="sidebar-link">Git基础</a></li><li class="sidebar-sub-header"><a href="/record/git学习经验.html#git修改文件" class="sidebar-link">Git修改文件</a></li><li class="sidebar-sub-header"><a href="/record/git学习经验.html#git常用命令" class="sidebar-link">Git常用命令</a></li><li class="sidebar-sub-header"><a href="/record/git学习经验.html#git可能遇到的问题" class="sidebar-link">Git可能遇到的问题</a></li></ul></li></ul></section></li><li><a href="/record/Linux命令行.html" class="sidebar-link">Linux命令行</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="git基础"><a href="#git基础" class="header-anchor">#</a> Git基础</h2> <h3 id="git安装"><a href="#git安装" class="header-anchor">#</a> Git安装</h3> <ul><li>windows从git官网<a href="https://git-scm.com/downloads" target="_blank" rel="noopener noreferrer">下载安装程序<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>Linux安装</li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> <span class="token function">git</span>
</code></pre></div><h3 id="git配置"><a href="#git配置" class="header-anchor">#</a> Git配置</h3> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">git</span> config --global user.name <span class="token string">&quot;Your Name&quot;</span>
$ <span class="token function">git</span> config --global user.email <span class="token string">&quot;email@example.com&quot;</span>
</code></pre></div><h3 id="git使用"><a href="#git使用" class="header-anchor">#</a> Git使用</h3> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token number">1</span>. 创建版本库
$ <span class="token function">git</span> init

<span class="token number">2</span>. 把文件添加到仓库
$ <span class="token function">git</span> <span class="token function">add</span> <span class="token punctuation">[</span>file1<span class="token punctuation">]</span> <span class="token punctuation">[</span>file2<span class="token punctuation">]</span> <span class="token punctuation">..</span>.

<span class="token number">3</span>. 把文件提交到本地仓库
$ <span class="token function">git</span> commit <span class="token punctuation">[</span>file1<span class="token punctuation">]</span> <span class="token punctuation">[</span>file2<span class="token punctuation">]</span> <span class="token punctuation">..</span>. -m <span class="token punctuation">[</span>message<span class="token punctuation">]</span>

<span class="token number">4</span>. 关联远程仓库
$ <span class="token function">git</span> remote <span class="token function">add</span> <span class="token punctuation">[</span>远程仓库别名<span class="token punctuation">]</span> <span class="token operator">&lt;</span>远程仓库URL<span class="token operator">&gt;</span>

<span class="token number">5</span>.推送到远程仓库<span class="token punctuation">(</span>-u把本地分支和远程分支关联<span class="token punctuation">)</span>
$ <span class="token function">git</span> push -u <span class="token punctuation">[</span>远程仓库别名<span class="token punctuation">]</span> <span class="token operator">&lt;</span>branch<span class="token operator">&gt;</span>
</code></pre></div><h2 id="git修改文件"><a href="#git修改文件" class="header-anchor">#</a> Git修改文件</h2> <h3 id="版本回退"><a href="#版本回退" class="header-anchor">#</a> 版本回退</h3> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment">#版本回退</span>
$ <span class="token function">git</span> reset --hard HEAD^
$ <span class="token function">git</span> reset --hard <span class="token operator">&lt;</span>commit_id<span class="token operator">&gt;</span>
<span class="token comment">#记录每一次命令(防止回退错误)</span>
$ <span class="token function">git</span> reflog
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>注意^与~之间的区别，当存在多个分支时，^可以用来选择分支，HEAD~i永远只选择第i级父节点的第一个分支，HEAD~i^2选择第i级父节点的第二个分支，以此类推；HEAD^=HEAD^1=HEAD~1；如果没有分支，只有一条主线，则HEAD^^^=HEAD^1^1^1=HEAD~3，如果该级节点有第二个分支，则表示为：HEAD^^^2 = HEAD~2^2</p> <div class="language- extra-class"><pre class="language-text"><code>G   H   I   J
 \ /     \ /
  D   E   F
   \  |  / \
    \ | /   |
     \|/    |
      B     C
       \   /
        \ /
         A
A =      = A^0
B = A^   = A^1     = A~1
C = A^2  = A^2
D = A^^  = A^1^1   = A~2
E = B^2  = A^^2
F = B^3  = A^^3
G = A^^^ = A^1^1^1 = A~3
H = D^2  = B^^2    = A^^^2  = A~2^2
I = F^   = B^3^    = A^^3^
J = F^2  = B^3^2   = A^^3^2
</code></pre></div></div> <h3 id="撤销修改"><a href="#撤销修改" class="header-anchor">#</a> 撤销修改</h3> <p>场景1：修改了工作区某个文件的内容，但没有添加到暂存区，想直接丢弃工作区的修改时，用命令<code>git restore &lt;filename&gt;</code></p> <p>场景2：当修改了工作区某个文件的内容，还添加到了暂存区时，想丢弃所有修改，分两步，第一步用命令<code>git restore --staged &lt;filnamne&gt;</code>，就回到了场景1，第二步按场景1操作。</p> <p>场景3：已经提交了不合适的修改到版本库时，想要撤销本次提交，使用版本回退</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <ol><li><code>--source</code>可以指定文件 <code>git restore &lt;filename&gt; --source HEAD &lt;filename&gt;</code></li> <li>在未给定 source 的情况下，如果使用 <code>--staged</code> ，从 <code>HEAD</code> 恢复(覆盖)暂存区，否则从暂存区恢复(覆盖)工作区</li></ol></div> <h3 id="撤销删除"><a href="#撤销删除" class="header-anchor">#</a> 撤销删除</h3> <ol><li>删除文件</li></ol> <blockquote><p><strong>1. 手动在工作区删除文件</strong><br>
使用<code>git rm &lt;filename&gt;</code>和<code>git add&lt;filename&gt;</code>效果一样，都将添加到暂存区<br> <strong>2. 直接使用<code>git rm &lt;filename&gt;</code></strong><br>
会自动删除工作区的文件，并且直接添加到暂存区</p></blockquote> <ol start="2"><li>撤销删除</li></ol> <blockquote><p>方法同<a href="#%E6%92%A4%E9%94%80%E4%BF%AE%E6%94%B9">撤销修改</a></p></blockquote> <h2 id="git常用命令"><a href="#git常用命令" class="header-anchor">#</a> Git常用命令</h2> <ol><li>git add</li></ol> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment">#一次性添加所有可用的文件</span>
$ <span class="token function">git</span> <span class="token function">add</span> -A
$ <span class="token function">git</span> <span class="token function">add</span> <span class="token builtin class-name">.</span>
<span class="token comment">#增加更新和新创建的文件,忽略删除的文件</span>
$ <span class="token function">git</span> <span class="token function">add</span> --ignore-removal <span class="token builtin class-name">.</span>
<span class="token comment">#增加修改和删除的文件,忽略新创建的文件</span>
$ <span class="token function">git</span> <span class="token function">add</span> -u
<span class="token comment">#通过通配符添加文件</span>
$ <span class="token function">git</span> <span class="token function">add</span> *.java
<span class="token comment">#Git撤销add</span>
$ <span class="token function">git</span> reset <span class="token operator">&lt;</span>filename<span class="token operator">&gt;</span>
</code></pre></div><ol start="2"><li>git commit</li></ol> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment">#提交所有修改的快照。这个选项只考虑Git中已经添加的文件</span>
$ <span class="token function">git</span> commit -a
<span class="token comment">#修改最后一次的提交信息</span>
$ <span class="token function">git</span> commit -amend
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <ol><li><p><code>git commit</code><br>
如果没有设置 -m 选项，Git 默认会打开 <a href="/record/Linux命令行.html#_6-vim">vim</a> 提交信息</p></li> <li><p><code>git commit -a</code> 可以跳过<code>git add [file]</code><br> <code>git commit -a</code> 只能提交已经存在的文件，提交新建的文件时会失败</p></li></ol></div> <ol start="3"><li>git status</li></ol> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">git</span> status <span class="token comment">#查看显示工作目录和暂存区的状态</span>
$ <span class="token function">git</span> status -s <span class="token comment">#紧凑的格式输出状态</span>
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <ol><li><code>git status</code>不显示已经commit到项目历史中去的信息,查看项目历史的信息要使用<code>git log</code></li> <li><code>git status -s</code><br>
新添加的未跟踪文件前面有 ?? 标记，新添加到暂存区中的文件前面有 A 标记，修改过的文件前面有 M 标记。
M 有两个可以出现的位置，出现在右边的 M 表示该文件被修改了但是还没放入暂存区，出现在靠左边的 M 表示该文件被修改了并放入了暂存区。</li></ol></div> <ol start="4"><li>git diff</li></ol> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment">#显示暂存区和工作区的差异</span>
$ <span class="token function">git</span> <span class="token function">diff</span>
<span class="token comment">#显示暂存区和本地仓库的差异</span>
$ <span class="token function">git</span> <span class="token function">diff</span> --staged <span class="token operator">||</span> $ <span class="token function">git</span> <span class="token function">diff</span> --cached <span class="token punctuation">[</span>file<span class="token punctuation">]</span>
<span class="token comment">#显示工作区和本地仓库的差异(HEAD 指向的是本地仓库中最新提交的版本)</span>
$ <span class="token function">git</span> <span class="token function">diff</span> HEAD
<span class="token comment">#显示两个提交之间的差异</span>
$ <span class="token function">git</span> <span class="token function">diff</span> <span class="token operator">&lt;</span>commit1-sha<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>commit2-sha<span class="token operator">&gt;</span>
<span class="token comment">#Git Diff 比较分支差异</span>
$ <span class="token function">git</span> <span class="token function">diff</span> <span class="token operator">&lt;</span>branch <span class="token operator"><span class="token file-descriptor important">1</span>&gt;</span> <span class="token operator">&lt;</span> branch <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span>
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <ol><li><code>$ git diff HEAD^</code><br>
比较 workspace 与最新commit的前一次commit的差异</li> <li><code>$ git diff HEAD~2</code><br>
比较 workspace 与上2次提交的差异，相当于 git diff HEAD~2 HEAD~0，注意两个HEAD的位置，diff显示的结果表示 后一个(HEAD~0) 相对于 前一个的修改(HEAD~2)</li></ol></div> <ol start="5"><li>git log</li></ol> <h3 id="git命令图解"><a href="#git命令图解" class="header-anchor">#</a> Git命令图解</h3> <p><img src="/imgs/record/git_problem/git%E6%B5%81%E7%A8%8B.png" alt="git命令"></p> <h2 id="git可能遇到的问题"><a href="#git可能遇到的问题" class="header-anchor">#</a> Git可能遇到的问题</h2> <h3 id="ssh-connect-to-host-github-com-port-22-connection-refused"><a href="#ssh-connect-to-host-github-com-port-22-connection-refused" class="header-anchor">#</a> ssh: connect to host github.com port 22: Connection refused</h3> <ol><li>修改.ssh的配置文件</li></ol> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">vim</span> ~/.ssh/config

Host github.com  
User xxxxx@xx.com  
Hostname ssh.github.com  
PreferredAuthentications publickey  
IdentityFile ~/.ssh/id_rsa  
Port <span class="token number">443</span>
</code></pre></div><div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>可能依然报错</p></div> <ol start="2"><li>首先到 ipaddress 输入 github.com 查找到其IP地址<br>
将查到的IP地址和网址映射放到你的本地 hosts 文件中即可，例子：140.82.112.4 github.com<br>
PS: windows 下 host 默认地址： C:\Windows\System32\drivers\etc</li></ol> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment">#如果省略远程分支名，则表示将本地分支推送与之存在&quot;追踪关系&quot;的远程分支（通常两者同名），</span>
<span class="token comment">#如果该远程分支不存在，则会被新建。</span>
$ <span class="token function">git</span> push <span class="token operator">&lt;</span>远程主机名<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>本地分支名<span class="token operator">&gt;</span>:<span class="token operator">&lt;</span>远程分支名<span class="token operator">&gt;</span>
$ <span class="token function">git</span> pull <span class="token operator">&lt;</span>远程主机名<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>远程分支<span class="token operator">&gt;</span>:<span class="token operator">&lt;</span>本地分支<span class="token operator">&gt;</span>
<span class="token comment"># 如果省略本地分支名，则表示删除指定的远程分支，因为这等同于推送一个空的本地分支到远程分支。</span>
$ <span class="token function">git</span> push origin :master
<span class="token comment"># 等同于</span>
$ <span class="token function">git</span> push origin --delete master
</code></pre></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">8/23/2022, 11:34:40 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/record/git提交问题.html" class="prev">
        git提交出现的问题
      </a></span> <span class="next"><a href="/record/Linux命令行.html">
        Linux命令行
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.30f6b455.js" defer></script><script src="/assets/js/2.2defd20b.js" defer></script><script src="/assets/js/16.7462880c.js" defer></script>
  </body>
</html>
