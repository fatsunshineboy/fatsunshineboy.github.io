# Linux命令行

## 1 查询命令帮助信息

> command --help
>
> man command
>

## 2 文件和目录常用命令

### root权限

sudo su - root

### 查看目录目录

#### ls

> -a 显示指定目录下所有子目录与文件，包括隐藏文件
>
> -l 以列表方式显示文件的详细信息
>
> -h配合-h以人性化的方式下现实文件大小
>
> ### 切换目录
>

#### cd

> cd 切换到当前用户的主目录（/home/用户目录）
>
> cd~ 切换到当前用户的主目录（/home/用户目录）
>
> cd . 保持当前目录不变
>
> cd .. 返回上一级目录
>
> cd - 可以在最近两次工作目录之间来回切换
>

### 创建和删除操作

#### touch

#### rm

-f 强制删除

-r 递归地删除目录下的内容，删除文件夹必须加此参数

#### mkdir

-p 可以递归创建目录

### 拷贝和移动文件

#### tree

-d 只显示目录

#### cp 源文件 目标文件

#### mv 源文件 目标文件

> -i 覆盖前进行提示
>
> -r 若给出的源文件是目录文件，则cp将递归复制该目录下的所有子目录和文件，目标文件必须为一个目录名
>

### 查看文件内容

#### cat 文件名

> cat命令可以用来查看文件内容、创建文件、文件合并、追加内容等功能
>
> cat命令会一次显示所有内容，适合查看内容较少的文本文件
>
> -b 对非空输出行编号
>
> -n 对输出的所有行编号
>
> Linux还有一个nl的命令和cat -b 的效果等价
>

#### more 文件名

> more每次只显示一页的内容
>
> 空格键 显示手册页的下一屏
>
> Enter键 一次滚动手册页的一行
>
> b 回滚一屏
>
> f 前滚一屏
>
> q 退出
>

#### grep文本搜索

> -n 显示匹配行及行号
>
> -v显示不包含匹配文本的所有行（相当于求反）
>
> -i忽略大小写
>
> ^a 行首，搜寻以a开头的行
>
> ke$ 行尾，搜寻以ke结束的行
>

#### 其他

#### echo

> 重定向 >和>>
>
> \>表示输出，会覆盖文件原有的内容
>
> \>>表示追加，会将内容追加到已有文件的末尾
>

#### 管道 |

more

grep

### Linux下文件和目录的特点

> Linux文件或者目录名称最长可以有256个字符
>
> 以 . 开头的文件为隐藏文件，需要用 ls -a 才可以显示出来
>
> . 代表当前目录
>
> . .代表上一级目录
>

## 3 远程管理常用命令

### 关机/重启

#### shutdown 关机/重启 时间

默认关机

-r 重启

默认一分钟后执行

> 现在重启操作系统
>
> shutdown -r now
>
> 系统在今天的20：25会关机
>
> shutdown 20：25
>
> 系统再过十分钟后自动关机
>
> shutdown +10
>
> 取消之前指定的关机计划
>
> shutdown -c

### 查看或配置网卡信息

ifconfig

ping

### 远程登录和复制文件

### ssh

> ssh [-p port] user@remote
>
> user是在远程机器上的用户名，如果不指定的话默认为当前用户
>
> remote是远程机器的地址，可以是Ip/域名，或者是别名
>
> port是SSH Server监听的端口，默认是22
>
> 开启ssh的命令：sudo /etc/init.d/ssh start
>
> 关闭ssh服务：sudo service ssh stop
>
> 重启ssh服务：sudo /etc/init.d/ssh restart
>
> 详细显示ssh服务进程：ps -e | grep ssh 或 ps -ef | grep ssh
>
> putty的远程连接输入exit退出

#### SSH高级

> 免密码登录
>
> 提示：有关SSH配置信息都保护在用户家目录下的.ssh目录下

#### scp(远程拷贝文件)

> scp [-P port] user@remote		注意这里的P需要大写
>
> scp -P port 文件 user@remote:Desktop/文件名

#### chmod

> chmod可以修改用户/组对文件/目录的权限
>
> chmod +/- rwx 文件名|目录名
>
> | 目录 | 拥有者权限 | 组权限 | 其他用户权限 |
> | ---- | ---------- | ------ | ------------ |
> | -    | rw-        | rw-    | r--          |
> | d    | rwx        | rwx    | r-x          |
>
> chmod -R 755 文件名|目录名
>
> 三个数字分别对应拥有者/组和其他用户的权限
>
> rwx 的代表数字分别是4、2、1，通过数字相加可以设置不同的权限
>
> | r    | w    | x    | 和   | 含义 |
> | ---- | ---- | ---- | ---- | ---- |
> | 4    | 2    | 1    | 7    | rwx  |
> | 4    | 2    | 0    | 6    | rw-  |
> | 4    | 0    | 1    | 5    | r-x  |
> | 4    | 0    | 0    | 4    | r--  |
> | 0    | 2    | 1    | 3    | -wx  |
> | 0    | 2    | 0    | 2    | -w-  |
> | 0    | 0    | 1    | 1    | --x  |
> | 0    | 0    | 0    | 0    | ---  |

####   执行文件（./文件名）

> python文件 
>
> 在源代码加上#!/usr/bin/python

#### 组管理终端命令

| 序号 | 命令                      | 作用                  |
| ---- | ------------------------- | --------------------- |
| 01   | groupadd                  | 添加组                |
| 02   | groupdel                  | 删除组                |
| 03   | cat /etc/group            | 确认组信息            |
| 04   | chgrp -R 组名 文件/目录名 | 修改文件/目录的所属组 |

#### 用户管理终端命令

| 序号 | 命令                          | 作用         | 说明                                                         |
| ---- | ----------------------------- | ------------ | ------------------------------------------------------------ |
| 01   | useradd -m -g 组 新建用户名   | 添加新用户   | -m自动建立用户家目录；-g 指定用户所在的组，否则会建立一个和组同名的组 |
| 02   | passwd                        | 设置用户密码 | 普通用户可以用passwd修改自己的密码                           |
| 03   | userdel -r 用户名             | 删除用户     | -r 会自动删除用户家目录                                      |
| 04   | cat /etc/passwd \|grep 用户名 | 确认用户信息 | 新建用户后，用户信息会保存在/etc、/passwd文件中              |

#### 查看用户信息

| 命令      | 作用                       |
| --------- | -------------------------- |
| id 用户名 | 查看用户UID和GID信息       |
| who       | 查看当前所有登录的用户列表 |
| whoami    | 查看当前登录用户的账户名   |

### passwd文件

> 用户名
>
> 密码（x，表示加密的密码）
>
> UID（用户标识）
>
> GID（组标识）
>
> 用户全名或本地账户
>
> 家目录
>
> 登录使用的shell，就是登录之后，使用的终端命令，ubuntu默认是dash

### usermod

> 修改用户的主组（passwd的GID）
>
> usermod -g 组 用户名
>
> 修改用户的附加组
>
> usermod -G 组 用户名
>
> 修改用户登录Shell
>
> usermod -s /bin/bash 用户名

#### which

> /etc/passwd 是用于保存用户信息的文件
>
> /usr/bin/passwd  是用于修改用户密码的程序
>
> which命令可以查看执行命令所在位置

#### 切换用户

| su  - 用户名 | 切换用户，并且切换目录 | -可以切换到用户家目录，否则保持位置不变 |
| ------------ | ---------------------- | --------------------------------------- |
| exit         | 退出当前登录账户       |                                         |

#### 修改文件权限

| chown 用户名 文件名\|目录名  | 修改拥有者 |
| :--------------------------- | ---------- |
| chgrp -R 组名 文件名\|目录名 | 修改组     |
| chmod -R 755 文件名\|目录名  | 修改权限   |

## 4 系统信息相关命令

### 时间和日期

> date	查看系统时间
>
> cal	calendar 查看日历，-y选项可以查看一年的日历

### 磁盘信息

> df-h	disk free 显示磁盘剩余空间
>
> du-h [目录名]	disk usage 显示目录下的文件大小
>
> -h 以人性化的方式显示大小

### 进程信息

> | ps aux             | process status查看进程的详细状况   |
> | ------------------ | ---------------------------------- |
> | top                | 动态显示运行中的进程并且排序       |
> | kill [-9] 进程代号 | 终止指定代号的进程，-9表示强行终止 |
>
> ps默认只会显示当前用户通过终端启动的应用程序
>
> ps选项说明
>
> a	显示终端上的所有进程
>
> u	显示进程的详细状态
>
> x	显示没有控制终端的进程



## 5 其他命令

### 查找文件

> find [路径] -name "*.py"	查找指定路径下扩展名是.py的文件，包括子目录

### 软链接

> ln -s 被链接的源文件链接文件	建立文件的软链接，用通俗的方式讲类似于Windows的快捷方式

### 打包/解包

> ##### 打包文件
>
> tar  -cvf 打包文件.tar 被打包的文件/路径
>
> ##### 解包文件
>
> tar -xvf 打包文件.tar
>
> ##### 选项说明
>
> c	生成档案文件，创建打包文件
>
> x	解开档案文件
>
> v	列出归档解档的详细过程，显示进度
>
> f	指定档案文件名称，f后面一定是 .tar 文件，所以必须放选项最后

### 压缩/解压缩(gzip,bzip2)

> 压缩文件
>
> tar -zcvf 打包文件.tar.gz 被压缩的文件/路径
>
> tar -jcvf 打包文件.tar.bz2 被压缩的文件/路径
>
> 解压缩文件
>
> tar -zxvf 打包文件.tar.gz
>
> tar -jxvf 打包文件.tar.bz2
>
> 解压缩到指定路径
>
> tar -zxvf 打包文件.tar.gz -C 目标路径

### 软件安装

> 安装软件
>
> sudo apt install 软件包
>
> 卸载软件
>
> sudo apt remove 软件名
>
> 更新已安装的软件包
>
> sudo apt upgra

## 6 vim

插入模式：i/insert，进入编辑状态

命令模式：按下：（冒号）键或者/（斜杠）

可视模式：v，V，ctrl+v

### VIM一次打开多个文件

> vim file1 file2
>
> 该方式打开文件，显示屏默认显示第一个文件也就是 file1，如何进行文件间的切换呢？VIM 的正常模式下（参考上文关于正常模式的描述）按下键盘上的冒号 ：这时会在显示屏底部出现冒号 ：（进入了 VIM 的命令模式），然后在输入 ls ，屏幕上会出现打开的所有文件的序号和文件名，我们继续输入冒号 ： ，然后输入 bn (这里的 n需要做一个解释并不是键盘上的 n ,而是文件序号的代指，如 b1 代表显示屏上切换到第一个文件，b2 代表显示屏上切换到第二个文件)。
>
> :ls
>
> 上面这个命令将会列出 VIM 打开的所有文件。
>
> :b2
>
> 上面的这个命令将会在显示屏上显示第二个文件。

### 在显示屏上一次性显示多个文件

> VIM 可以实现分屏操作，一个屏幕被多个文件给分占，有左右和上下两种分屏的方式。
>
> 左右分屏如下操作：
>
> vim -On file1 file2 ... filen
>
> 这里的 n （ n 是要打开的具体文件的数目：1,2,3 ...）是代表有几个文件需要分屏，从左至右依次显示 n 个文件。
>
> 
>
> 上下分屏如下操作：
>
> vim -on file1 file2 ... filen
>
> 这个命令跟上一个命令不同的是其中的参数 -on（ n 是要打开的具体文件的数目：1,2,3 ...） 中的 o 是小写，这样将会上下依次显示 n 个文件。

## 7 防火墙

### 查看防火墙的状态

> sudo ufw status
>
> 系统提示： “Status: inactive”状态：不活跃
>
> 上面提示表示没有开启防火墙，并不是没有安装防火墙
>
> 如果没有安装可以使用命令安装
>
> 命令：
>
>        sudo sudo apt-get install ufw

### Ubuntu开启防火墙

>  sudo ufw enable
>

### Ubuntu添加开放SSH端口

>  sudo ufw allow 22        //开放22端口

### 重启防火墙

> sudo ufw reload           //重启ufw防

### 设置外来访问默认权限

>  sudo ufw default deny        //拒接所有外来访问，本机能正常访问外部

### 关闭普通端口

> sudo ufw delete allow 21           //关闭21端口

### 开放规定协议的端口

> sudo ufw allow 8001/tcp            //指定开放8001的tcp协议

### 关闭指定协议端口

>   sudo ufw delete allow 8001/tcp        //关闭21端口

### 开放指定ip所有操作

>  sudo ufw allow from 192.168.121.1  

### 关闭指定ip所有操作

> sudo ufw delete allow from 192.168.121.1
>
> // 关闭指定ip为192.168.121.1的计算机操作所有端口

### 开放指定ip对应端口操作

>    sudo ufw allow from 192.168.121.2 to any port 3306
>
> // 开放指定ip为192.168.121.2的计算机访问本机的3306端口

### 关闭指定ip对应端口操作

>   sudo ufw delete allow from 192.168.121.2 to any port 3306
>
> // 关闭指定ip为192.168.121.2的计算机对本机的3306端口的操作

### tab

> 输入目录时，**tab**键可以自动补全路径，当一个文件夹下有多个首字母相同，连续两个tab键，会显示出此文件夹下所有以此首字母开头的文件
>

### 上下光标键

> 切换曾经使用过的命令
>
> 如果想退出选择，并且不想执行当前选中的命令，可以按  **ctrl+c**
>



## 8 通配符

> *代表任意个字符
>
> ？代表任意一个字符，至少一个
>
> []表示可以匹配字符组的任一个
>
> [abc] 匹配a、b、c中的任意一个
>
> [a-f]匹配a到f范围内的任意一个字符
>







